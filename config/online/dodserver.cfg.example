//===============================================
//             KTP DoD Server Config
//             Profile: Online (production mode)
//===============================================
// Copy to serverfiles/dod/dodserver.cfg
// Replace placeholders:
//   <RCON_PASSWORD>   - Your RCON password
//   <SERVER_PASSWORD> - Server password (e.g., "KTP")

//-----------------------------------------------
//               Server Identity
//-----------------------------------------------
hostname ""
exec configs/servernamedefault.cfg
sv_region 0                         // 0 = US East, 1 = US West
rcon_password "<RCON_PASSWORD>"
sv_password "<SERVER_PASSWORD>"

//-----------------------------------------------
//               Gameplay Settings
//-----------------------------------------------
mp_autocrosshair 0
mp_flashlight 1
mp_friendlyfire 0
mp_fraglimit 0
mp_timelimit 20
mp_limitteams 0
mp_allowspectators 1
mp_deathmsg 1
mp_falldamage 1
mp_footsteps 1
sv_cheats 0
sv_maxspectators 4
pausable 0
decalfrequency 30

//-----------------------------------------------
//               Downloads
//-----------------------------------------------
sv_allowdownload 1
sv_allowupload 1
sv_downloadurl "http://<DATA_SERVER_IP>/dod/"
hpk_maxsize 1

//-----------------------------------------------
//               Physics
//-----------------------------------------------
sv_accelerate 10
sv_aim 0
sv_airaccelerate 10
sv_airmove 1
sv_bounce 1
sv_clienttrace 3.5
sv_clipmode 0
sv_friction 4
sv_gravity 800
sv_maxspeed 500
sv_stepsize 18
sv_stopspeed 100
sv_wateraccelerate 10
sv_waterfriction 1
edgefriction 2

//-----------------------------------------------
//               DoD Settings
//-----------------------------------------------
mp_clan_mg42_limit 0

// Bullet tracers
traceroffset 100
tracerlength 0.45
tracerred 1.3
tracergreen 0.7
tracerblue 0.1
traceralpha 0.45
tracerspeed 6250

//-----------------------------------------------
//               Netcode & Rates
//-----------------------------------------------
sv_unlag 1
sv_maxunlag 0.1
sv_minupdaterate 100
sv_maxupdaterate 120
sv_mincmdrate 100
sv_maxcmdrate 500
sv_minrate 100000
sv_maxrate 1000000
fakelag 0
fakeloss 0

//-----------------------------------------------
//               Class Limits
//-----------------------------------------------
// Allies
mp_limitalliesgarand 3              // Rifleman
mp_limitalliescarbine 1             // Staff Sergeant
mp_limitalliesthompson 2            // Master Sergeant
mp_limitalliesgreasegun 0           // Sergeant
mp_limitalliesspring 1              // Sniper
mp_limitalliesbar 2                 // BAR
mp_limitallies30cal 0               // Machine Gunner
mp_limitalliesbazooka 0             // Bazooka

// Axis
mp_limitaxiskar 2                   // Grenadier
mp_limitaxisk43 1                   // Stosstruppe
mp_limitaxismp40 2                  // Unteroffizier
mp_limitaxismp44 2                  // Sturmtruppe
mp_limitaxisscopedkar 1             // Sniper
mp_limitaxisfg42 0                  // FG42 Bipod
mp_limitaxisfg42s 0                 // FG42 Scoped
mp_limitaxismg34 0                  // MG34
mp_limitaxismg42 0                  // MG42
mp_limitaxispschreck 0              // Panzerschreck
mp_combinemglimits 1

// Team balance
mp_teamlimit -1

//-----------------------------------------------
//               KTP Plugin Settings
//-----------------------------------------------
ktp_grenade_dmg 1                   // Enable grenade damage reduction
ktp_grenade_dmg_reduce 0            // Reduction percentage (0 = full damage)

//-----------------------------------------------
//               Server Performance
//-----------------------------------------------
sys_ticrate 1000
sv_stats 0
max_queries_sec 3
max_queries_sec_global 100
mapchangecfgfile "dodserver.cfg"

//-----------------------------------------------
//               ReHLDS Flood Protection
//-----------------------------------------------
// Tuned for high cmdrate competitive play
// Kick-only (-1) instead of ban (KTPAdminAudit blocks addip anyway)
sv_rehlds_movecmdrate_max_burst 10000
sv_rehlds_movecmdrate_burst_punish -1
sv_rehlds_stringcmdrate_max_burst 800
sv_rehlds_stringcmdrate_burst_punish -1

//-----------------------------------------------
//               Logging
//-----------------------------------------------
log on
sv_logbans 1
sv_logecho 1
sv_logfile 1
sv_log_onefile 0
dodstats_pause 0
logaddress_add <DATA_SERVER_IP> 27500

//-----------------------------------------------
//               Voice
//-----------------------------------------------
sv_voicecodec voice_speex
sv_voicequality 2

//-----------------------------------------------
//               Initialization
//-----------------------------------------------
exec listip.cfg
exec banned.cfg
heartbeat
